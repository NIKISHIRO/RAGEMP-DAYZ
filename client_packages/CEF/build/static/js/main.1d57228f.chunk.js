(this["webpackJsonpmy-application"]=this["webpackJsonpmy-application"]||[]).push([[0],{110:function(e,t,n){},112:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(7),c=n.n(o);n(95),n(96),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,l,s=n(9),u=n(23),m=n(17),d=n(19),p=n(22),v=n(35),f=n.n(v),E=function(e){return function(t,n){t({type:"SET_INVENTORY_ITEMS",payload:Object(p.a)(e)})}},b=function(e,t){return function(n,a){if(Number.isInteger(t)&&!(t<=0)){var r=a().UI.inventory.items,o=Object(p.a)(r),c=JSON.parse(JSON.stringify(o[e])),i=JSON.parse(JSON.stringify(c)),l=o[e];if(!(l.amount<=t)){var s=l.amount-t;c.amount=s,i.data.shortid="__newItem".concat(f.a.generate()),i.amount=t,o.splice(e,1),o.unshift(c,i),n(E(o))}}}},g=function(e){return function(t,n){t({type:"ITEMS_GROUND_ITEMS",payload:Object(p.a)(e)})}};!function(e){e.WEAPON="WEAPON",e.ARMOR="ARMOR",e.BACKPACK="BACKPACK",e.AMMO="AMMO"}(i||(i={})),function(e){e.ITEM_WEAPON_AK47="ITEM_WEAPON_AK47",e.ITEM_ARMOR="ITEM_ARMOR",e.ITEM_AMMO_SHOTGUN="ITEM_AMMO_SHOTGUN"}(l||(l={}));var y={snackbar:{open:!1,text:"",origin:{vertical:"bottom",horizontal:"center"}},inventory:{slots:10,items:[]},ground:{items:[{key:l.ITEM_WEAPON_AK47,amount:1,data:{type:i.WEAPON,name:"Kalash",description:"\u0423\u0431\u0438\u0432\u0430\u0446",maxStackCount:1,shortid:f.a.generate(),weight:5}},{key:l.ITEM_AMMO_SHOTGUN,amount:99,data:{type:i.AMMO,name:"SHOTGUN SHELL",description:"\u041f\u0435\u0440\u0435\u0436\u0430\u0440\u0438\u0437\u0430\u0446",maxStackCount:30,shortid:f.a.generate(),weight:.1}},{key:l.ITEM_ARMOR,amount:1,data:{type:i.ARMOR,name:"ARMOR",description:"\u0417\u0430\u0449\u0438\u0449\u0430\u0446",maxStackCount:1,shortid:f.a.generate(),weight:6}},{key:l.ITEM_WEAPON_AK47,amount:1,data:{type:i.WEAPON,name:"Kalash",description:"\u0423\u0431\u0438\u0432\u0430\u0446",maxStackCount:1,shortid:f.a.generate(),weight:5}}]}};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SNACKBAR":return Object(d.a)({},e,{snackbar:Object(d.a)({},t.payload)});case"SET_INVENTORY_ITEMS":return e.inventory.items=t.payload,Object(d.a)({},e);case"SET_INVENTORY_SLOTS":return e.inventory.slots=t.payload,Object(d.a)({},e);case"ITEMS_GROUND_ITEMS":return Object(d.a)({},e,{ground:{items:t.payload}});default:return e}}var O={isShow:!0};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_SHOW":return Object(d.a)({},e,{isShow:t.payload});default:return Object(d.a)({},e)}}var N=n(37),S=n(69),_=n.n(S),k=n(70),x=n(65),j=n(15),M=n(71),T=new(n.n(M).a);var A,C,w=Object(u.b)({initialEntries:["/one","/two",{pathname:"/three"}],initialIndex:1}),U=Object(m.e)((A=w,Object(m.c)({UI:I,clothes:h,router:Object(N.b)(A)})),Object(m.d)(Object(m.a)(Object(x.a)(w),k.a,_.a)));C=U.dispatch,U.getState,T.on("goToHome",(function(){C(Object(j.d)("/"))})),T.on("goToUi",(function(){C(Object(j.d)("/ui"))})),T.on("eventSetGroundItems",(function(e){C(g(e))})),T.on("eventSetInventorySlots",(function(e){C(function(e){return function(t,n){t({type:"SET_INVENTORY_SLOTS",payload:e})}}(e))}));var R,P=n(55),K=(n(110),n(31)),W=n.n(K),G=n(44),H=n(30),B=(n(112),n(27)),z=n(38),J=n(72),D=n.n(J),V=n(73),L=n.n(V),Y=n(74),q=n.n(Y),F=(R={},Object(z.a)(R,l.ITEM_WEAPON_AK47,D.a),Object(z.a)(R,l.ITEM_ARMOR,L.a),Object(z.a)(R,l.ITEM_AMMO_SHOTGUN,q.a),R),$=n(75),Q=Object(s.c)((function(e){return{UIState:e.UI}}),(function(e){return{setInventoryItems:function(t){return e(E(t))},splitInventoryItemByIndex:function(t,n){return e(b(t,n))},stackItems:function(t,n){return e(function(e,t){return function(n,a){var r=a().UI.inventory.items,o=Object(p.a)(r);if(-1!==e&&-1!==t){var c=Object(d.a)({},r[e]),i=Object(d.a)({},r[t]);if(c.key===i.key){var l=c.data.maxStackCount,s=c.amount+i.amount;if(console.log("maxStackCount",l),console.log("sum",s),s>l){var u=s-l;c.amount=u,i.amount=l,o.splice(e,1,c),o.splice(t,1,i)}else i.amount=s,o.splice(e,1,i),o.splice(t,1);n({type:"SET_INVENTORY_ITEMS",payload:o})}}}}(t,n))}}}))((function(e){var t,n,a,o=e.item,c=e.id,i=e.UIState,l=(e.setInventoryItems,e.splitInventoryItemByIndex),s=e.isInventory,u=e.onSelectItem,m=e.stackItems,d=i.inventory.items,p=(t=o.key,F[t]),v=!1;if(s){var f=d.findIndex((function(e){return e===o}));-1!==f&&(n=d[f],a=d[f+1],n&&a&&n.key===a.key&&n.data.maxStackCount>1&&(v=!0))}var E=function(e){if(s&&2===e.button){if(o.amount<=1)return;var t=d.findIndex((function(e){return e===o}));if(-1===t)return;l(t,Math.floor(o.amount/2))}};return r.a.createElement(B.b,{draggableId:o.data.shortid,index:c},(function(e,t){return r.a.createElement("div",{onClick:u?function(e){return u(o,e)}:function(){return!1},onMouseDown:E},r.a.createElement("div",{ref:e.innerRef},r.a.createElement("div",Object.assign({className:" inventory-cell"},e.draggableProps,e.dragHandleProps),r.a.createElement("div",{className:"inventory-cell-image"},r.a.createElement("img",{src:p,draggable:!1})),r.a.createElement("div",{className:"inventory-cell-name"},o.data.name),r.a.createElement("div",{className:"inventory-cell-amount"},o.amount),v&&r.a.createElement("div",{className:"isStack",onClick:function(e){return function(e){e.stopPropagation();var t=d.findIndex((function(e){return e===n})),r=d.findIndex((function(e){return e===a}));m(t,r)}(e)}},r.a.createElement($.a,null)))))}))})),X=n(152),Z=n(155),ee=n(153),te=n(79);var ne=Object(s.c)((function(e){return{UIState:e.UI}}),(function(e){return{splitInventoryItemByIndex:function(t,n){return e(b(t,n))}}}))((function(e){var t=e.item,n=e.splitInventoryItemByIndex,o=e.UIState.inventory.items,c=t.amount,i=c-1,l=Object(a.useState)(i),s=Object(H.a)(l,2),u=s[0],m=s[1],d=function(e){Number.isInteger(e)&&!isNaN(e)||m(0),e>i&&m(i),e<i&&m(e),e<0&&m(0)};return r.a.createElement("div",{className:"popover-tab-container"},r.a.createElement("div",{className:"popover-tab-container__item"},r.a.createElement(Z.a,{defaultValue:1,valueLabelDisplay:"auto",step:Math.ceil(c/100*10),min:1,max:i,value:u,onChange:function(e,t){"number"===typeof t&&(d(t),console.log("-> onSliderChange value",t),"number"===typeof t&&m(t))},disabled:i<=1,marks:!0})),r.a.createElement("input",{type:"text",value:u,onChange:function(e){var t=parseInt(e.target.value);d(t)}}),r.a.createElement("div",{onClick:function(a){var r=Object(p.a)(o).findIndex((function(e){return e===t}));-1!==r?(n(r,u),e.onPopClose()):e.onPopClose()}},r.a.createElement(ee.a,{color:"inherit","aria-label":"upload picture",component:"span",classes:{root:"popover-icon-button"}},r.a.createElement(te.a,null))))})),ae=n(84);function re(e){var t=e.item,n=e.anchorEl,a=e.onPopClose,o=Object(ae.a)(0),c=o.state,i=o.toggle;function l(){return r.a.createElement("div",{className:"popover-select-tab"},r.a.createElement("div",{onClick:function(){return i(2)}},"\u0418\u043d\u0444\u043e."),r.a.createElement("div",null,"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c"),r.a.createElement("div",{onClick:function(){return i(1)}},"\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c"),r.a.createElement("div",null,"\u0412\u044b\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))}function s(){return r.a.createElement("div",{className:"cell-popover-content cell-popover-content-tab2"},r.a.createElement("div",{className:"cell-popover-content__data"},r.a.createElement("strong",null,t.data.name," (\xa0",t.amount,"\xa0)")),r.a.createElement("div",{className:"cell-popover-content__change-data"},r.a.createElement(ne,{onPopClose:a,item:t})))}function u(){return r.a.createElement("div",{className:"cell-popover-content cell-popover-content-tab3"},r.a.createElement("div",{className:"cell-popover-content__change-data"},r.a.createElement("div",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",t.data.name),r.a.createElement("div",null,"\u041a\u043e\u043b-\u0432\u043e: ",t.amount),r.a.createElement("div",null,"\u041c\u0430\u043a\u0441. \u0441\u0442\u0430\u043a: ",t.data.maxStackCount),r.a.createElement("div",null,"\u0432\u0435\u0441: ",t.data.weight),r.a.createElement("div",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",t.data.description),r.a.createElement("div",null,"\u0422\u0438\u043f: ",t.data.type)))}return r.a.createElement(X.a,{classes:{root:"rootOverridePopover",paper:"paperOverridePopover"},id:"cell-popover",open:!!n,anchorEl:n,onClose:a,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement("div",{className:"cell-popover"},0===c&&r.a.createElement(l,null),1===c&&r.a.createElement(s,null),2===c&&r.a.createElement(u,null)))}var oe=Object(s.c)((function(e){return{UIState:e.UI}}))((function(e){var t=e.UIState.inventory.items,n=Object(a.useState)(null),o=Object(H.a)(n,2),c=o[0],i=o[1],l=Object(a.useState)(null),s=Object(H.a)(l,2),u=s[0],m=s[1],d=function(e,t){i(e),m(t.currentTarget)};return r.a.createElement(r.a.Fragment,null,!!c&&r.a.createElement(re,{onPopClose:function(){i(null),m(null)},anchorEl:u,item:c}),r.a.createElement(B.c,{droppableId:"droppable1"},(function(e,n){return r.a.createElement("div",Object.assign({ref:e.innerRef,style:(n.isDraggingOver,{overflow:"auto",height:"100%"})},e.droppableProps),t.map((function(e,t){return r.a.createElement(Q,{onSelectItem:d,key:"".concat("__inventoryCells").concat(e.data.shortid),id:t,item:e,isInventory:!0})})),e.placeholder)})))})),ce=function(e){var t=e.slots;return r.a.createElement("div",{className:"inventory"},r.a.createElement("div",{className:"ui-top"},"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c (",t,")"),r.a.createElement("div",{className:"inventory-middle"},r.a.createElement("div",{className:"inventory-clothes"},r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"}),r.a.createElement("div",{className:"clothes-item"})),r.a.createElement("div",{className:"inventory-body-items"},r.a.createElement("div",{className:"inventory-body-left"},r.a.createElement(oe,null)),r.a.createElement("div",{className:"inventory-body-right"},"inventory-body-right"))))},ie=Object(s.c)((function(e){return{UIState:e.UI}}),(function(e){return{setInventoryItems:function(t){return e(E(t))}}}))((function(e){var t=e.UIState.ground.items;return r.a.createElement(B.c,{droppableId:"droppable"},(function(e,n){return r.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef,style:(n.isDraggingOver,{overflow:"auto",height:"100%"})}),t.map((function(e,t){return r.a.createElement(Q,{onSelectItem:function(){return!1},key:"".concat("__groundCells").concat(e.data.shortid),id:t,item:e})})),e.placeholder)}))})),le=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"items-ground"},r.a.createElement("div",{className:"ui-top"},"items-ground-top"),r.a.createElement("div",{className:"items-ground-middle"},r.a.createElement(ie,null))))},se=n(41),ue=n.n(se);function me(e,t){return de.apply(this,arguments)}function de(){return(de=Object(G.a)(W.a.mark((function e(t,n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue.a.callServer("server_take_inventory_item",JSON.stringify({shortid:t,amount:n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(G.a)(W.a.mark((function e(t,n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue.a.callServer("server_drop_inventory_item",JSON.stringify({itemKey:t,amount:n})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=n(156),Ee=function(e,t,n,a){var r=Array.from(e),o=Array.from(t),c=r.splice(n.index,1),i=Object(H.a)(c,1)[0];o.splice(a.index,0,i);var l={};return l[n.droppableId]=r,l[a.droppableId]=o,console.log("result",l),l},be=function(e,t,n){var a=Array.from(e),r=a.splice(t,1),o=Object(H.a)(r,1)[0];return a.splice(n,0,o),a};var ge=Object(s.c)((function(e){return{UIState:e.UI}}),(function(e){return{setInventoryItems:function(t){return e(E(t))},setGroundItems:function(t){return e(g(t))},setSnackbar:function(t){return e((n=t,function(e,t){n.hasOwnProperty("origin")||(n=Object(d.a)({},n,{origin:{horizontal:"center",vertical:"bottom"}}),console.log("snackbar",n)),e({type:"SET_SNACKBAR",payload:n})}));var n}}}))((function(e){var t=e.UIState,n=e.setInventoryItems,a=e.setGroundItems,o=e.setSnackbar,c=t.inventory,i=t.ground,l=t.snackbar,s=c.slots,u={droppable:"ground",droppable1:"inventory"},m=function(e){return t[u[e]].items},d=function(){var e=Object(G.a)(W.a.mark((function e(t){var r,l,s,u,d,v,f,E,b;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.source,l=t.destination,console.log("result",t),console.log("source",r),console.log("destination",l),l){e.next=6;break}return e.abrupt("return");case 6:if(r.droppableId!==l.droppableId){e.next=15;break}s=be(m(r.droppableId),r.index,l.index),console.log("-> items",s),console.log("-> source.droppableId",r.droppableId),console.log("-> destination.index",l.index),"droppable"===r.droppableId&&a(s),"droppable1"===r.droppableId&&n(s),e.next=31;break;case 15:if(u=Ee(m(r.droppableId),m(l.droppableId),r,l),"droppable1"!==r.droppableId){e.next=23;break}return d=Object(p.a)(c.items),v=d[r.index],e.next=21,pe(v.key,v.amount);case 21:e.sent.result&&(a(u.droppable),n(u.droppable1));case 23:if("droppable"!==r.droppableId){e.next=31;break}return f=Object(p.a)(i.items),E=f[r.index],console.log(" ---\x3e \u041f\u0420\u0415\u0414\u041c\u0415\u0422 \u041f\u041e\u041b\u041e\u0416\u0418\u041b\u0418.",E),e.next=29,me(E.data.shortid,E.amount);case 29:(b=e.sent).result?(a(u.droppable),n(u.droppable1),o({open:!0,text:b.text,origin:{vertical:"bottom",horizontal:"center"}})):o({open:!0,text:b.text,origin:{vertical:"bottom",horizontal:"center"}});case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"UI"},r.a.createElement(fe.a,{anchorOrigin:{vertical:l.origin.vertical,horizontal:l.origin.horizontal},key:"".concat(l.origin.vertical,",").concat(l.origin.horizontal),open:l.open,message:l.text,autoHideDuration:3e3}),r.a.createElement("div",{className:"UI-container"},r.a.createElement(B.a,{onDragEnd:d},r.a.createElement(le,null),r.a.createElement(ce,{slots:s}))))}));function ye(){return r.a.createElement("div",{style:{position:"absolute",top:0,left:0}},r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"#",onClick:function(){return T.emit("goToHome")}},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",null,r.a.createElement("a",{href:"#",onClick:function(){return T.emit("goToUi")}},"Equipment")))))}function Ie(e){e.history;return console.log("history"),r.a.createElement("div",null,"\u0412\u0441\u0435\u043c \u043f\u0440\u0438\u0432\u0435\u0442, \u044f \u0445\u043e\u043c\u0435.")}function Oe(e){return T.emit("goToUi"),r.a.createElement("div",{className:"app"},r.a.createElement(ye,null),r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:Ie}),r.a.createElement(P.a,{path:"/ui",component:ge})))}function he(){return r.a.createElement(s.a,{store:U},r.a.createElement(N.a,{history:w},r.a.createElement(Oe,null)))}c.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),console.log(" ---\x3e rpcRegister"),ue.a.register("cef_set_ground_items",(function(e){var t;console.log("\u041e\u041d \u0414\u041e\u0428\u0415\u041b \u0414\u041e \u0426\u0415\u0424\u0410. data",e),console.log(JSON.stringify(e)),t=e,T.emit("eventSetGroundItems",t)})),ue.a.register("cef_set_inventory_slots",(function(e){!function(e){T.emit("eventSetInventorySlots",e)}(e)}))},72:function(e,t,n){e.exports=n.p+"static/media/item_weapon_ak47.4540b0aa.png"},73:function(e,t,n){e.exports=n.p+"static/media/item_armor.54e93891.png"},74:function(e,t,n){e.exports=n.p+"static/media/item_ammo_shotgun.ad78f4ac.png"},90:function(e,t,n){e.exports=n(128)},96:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.1d57228f.chunk.js.map